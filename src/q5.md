```js 

const prospAndSust = FileAttachment("prosperity_sustainability.csv").csv(); 

``` 


```js 
const dims = {
    width: 810,  
    height: 620,  
    margin_top: 60,
    margin_right: 30,
    margin_bottom: 60,
    margin_left: 80
  };

  const innerWidth = dims.width - dims.margin_left - dims.margin_right;
  const innerHeight = dims.height - dims.margin_top - dims.margin_bottom;

  const svg = d3.create('svg')
    .attr('width', dims.width)
    .attr('height', dims.height);

  const chart = svg.append('g')
    .attr('transform', `translate(${dims.margin_left}, ${dims.margin_top})`);
    
  const gdpCol = "gdp per capita (current us$)";
  const ghgCol = "total greenhouse gas emissions excluding lulucf per capita (t co2e/capita)";
  
  const plotData = prospAndSust.map(d => ({
    gdp: +d[gdpCol],
    ghg: +d[ghgCol],
    country: d["country"]
  })); 
  
  // Scales
  const x_scale = d3.scaleLinear() 
    .domain(d3.extent(plotData, d => d.gdp))
    .range([0, innerWidth])
    .nice(); 

  const y_scale = d3.scaleLinear()
    .domain(d3.extent(plotData, d => d.ghg))
    .range([innerHeight, 0]) 
    .nice();

  // Gridlines 
  chart.append("g")
    .attr("class", "grid")
    .attr("transform", `translate(0, ${innerHeight})`)
    .call(d3.axisBottom(x_scale)
      .tickSize(-innerHeight)
      .tickFormat("")
    )
    .call(g => g.selectAll("line").attr("stroke-opacity", 0.1));

  chart.append("g")
    .attr("class", "grid")
    .call(d3.axisLeft(y_scale)
      .tickSize(-innerWidth)
      .tickFormat("")
    )
    .call(g => g.selectAll("line").attr("stroke-opacity", 0.1));

  // Axis
  chart.append("g")
    .attr("transform", `translate(0, ${innerHeight})`)
    .call(d3.axisBottom(x_scale)); 

  chart.append("g")
    .call(d3.axisLeft(y_scale));

  chart.selectAll("circle")
    .data(plotData)
    .enter()
    .append("circle")
      .attr("cx", d => x_scale(d.gdp))
      .attr("cy", d => y_scale(d.ghg))
      .attr("r", 5)
      .style("fill", "steelblue")
      .style("opacity", 0.7);

  // Titles
  svg.append("text")
    .attr("text-anchor", "middle")
    .attr("x", dims.margin_left + innerWidth / 2)
    .attr("y", dims.height - dims.margin_bottom / 2)
    .text("GDP Per Capita (Current US$)");

  svg.append("text")
    .attr("text-anchor", "middle")
    .attr("transform", "rotate(-90)")
    .attr("y", dims.margin_left / 2)
    .attr("x", -(dims.margin_top + innerHeight / 2))
    .text("Total Greenhouse Gas Emissions (t CO2e/capita)");

  svg.append("text")
    .attr("text-anchor", "middle")
    .attr("x", dims.width / 2)
    .attr("y", dims.margin_top / 2)
    .style("font-size", "18px")
    .style("font-weight", "bold")
    .text("GDP vs. Greenhouse Gas Emissions");

  display(svg.node());

``` 